<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fuentes de Poder | Andes PC</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <nav>
            <a href="index.html" class="logo">ANDES PC</a>
            <ul class="nav-links">
                <li><a href="index.html">Inicio</a></li>
                <li><a href="servicios.html">Servicios</a></li>
                <li><a href="productos.html">Productos</a></li>
                <li><a href="configurador.html">ArmÃ¡ tu PC</a></li>
                <li><a href="pedidos.html">Pedidos</a></li>
                <li><a href="contacto.html">Contacto</a></li>
                <li><a href="somo.html">Quienes somos</a></li>
            </ul>
            <a href="https://wa.me/5492612773162" class="cta-button">Consultar</a>
        </nav>
    </header>

    <section id="productos">
        <h2 class="section-title">Fuentes de Poder</h2>
        <p class="section-subtitle">Certificadas 80 Plus</p>
        
        <div id="loading" class="loading-message" style="text-align: center; padding: 3rem; color: #6b7280;">
            <i class="fas fa-spinner fa-spin"></i> Cargando productos...
        </div>

        <div class="products-category">
            <div class="products-grid" id="productsContainer"></div>
        </div>
    </section>

    <footer>
        <div class="footer-content">
            <div class="social-links">
                <a href="https://instagram.com/tunombre" target="_blank" title="Instagram">
                    <i class="fa-brands fa-instagram"></i>
                </a>
                <a href="https://tiktok.com/@tunombre" target="_blank" title="TikTok">
                    <i class="fa-brands fa-tiktok"></i>
                </a>
            </div>
            <div class="footer-links">
                <a href="index.html">Inicio</a>
                <a href="servicios.html">Servicios</a>
                <a href="productos.html">Productos</a>
                <a href="contacto.html">Contacto</a>
                <a href="somo.html">Quienes somos</a>
                <a href="pedidos.html">Pedidos</a>
            </div>
            <p style="color: #9ca3af; margin-top: 2rem;">&copy; 2026 Andes PC. Todos los derechos reservados.</p>
        </div>
    </footer>

    <a href="https://wa.me/5492612773162?text=Hola,%20quiero%20consultar%20sobre..." class="whatsapp-float">ðŸ’¬</a>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, getDocs, query, where, orderBy } 
            from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        const firebaseConfig = {
            apiKey: "AIzaSyBRKLtxUVVR6GrNL9QLhZsR0jPx4yjnhCo",
            authDomain: "andes-pc-bb5c4.firebaseapp.com",
            projectId: "andes-pc-bb5c4",
            storageBucket: "andes-pc-bb5c4.firebasestorage.app",
            messagingSenderId: "687831951001",
            appId: "1:687831951001:web:81be0a20b32e337a3cba08",
            measurementId: "G-QXMQBYZ5Q3"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        async function cargarFuentes() {
            try {
                const loadingEl = document.getElementById('loading');
                const containerEl = document.getElementById('productsContainer');

                const productosRef = collection(db, 'productos');
                const q = query(
                    productosRef, 
                    where('categoria', '==', 'fuente'),
                    where('stock', '>', 0),
                    orderBy('stock'),
                    orderBy('nombre')
                );
                const querySnapshot = await getDocs(q);

                loadingEl.style.display = 'none';

                if (querySnapshot.empty) {
                    containerEl.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 3rem; color: #6b7280;"><p style="font-size: 1.2rem;">ðŸ“¦ No hay fuentes disponibles</p></div>';
                    return;
                }

                querySnapshot.forEach((doc) => {
                    const producto = doc.data();
                    const stockText = 'âœ“ Disponible';
                    const stockColor = '#059669';

                    containerEl.innerHTML += `
                        <div class="product-card">
                            <div class="product-image">
                                ${producto.imagen ? `<img src="${producto.imagen}" alt="${producto.nombre}">` : (producto.emoji || 'âš¡')}
                            </div>
                            <div class="product-info">
                                <div class="product-name">${producto.nombre}</div>
                                <div class="product-specs">${producto.especificaciones || ''}</div>
                                <div class="product-price">$${producto.precio.toLocaleString('es-AR')}</div>
                                <div class="product-stock" style="margin-bottom: 1rem; font-size: 0.9rem; color: ${stockColor}; font-weight: 500;">${stockText}</div>
                                <button class="product-contact" onclick="contactWhatsApp('${producto.nombre}')"><i class="fab fa-whatsapp"></i> Consultar</button>
                            </div>
                        </div>
                    `;
                });
            } catch (error) {
                console.error("Error:", error);
                document.getElementById('loading').innerHTML = '<div style="color: #dc2626;"><i class="fas fa-exclamation-triangle"></i> Error al cargar productos</div>';
            }
        }

        cargarFuentes();
    </script>
    <script src="script.js"></script>
</body>
</html>